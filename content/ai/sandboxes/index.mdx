---
title: Docker Sandboxes
description: AIエージェントを隔離された環境で実行する
asIndexPage: true
---

# Docker Sandboxes

Docker Sandboxesを使用すると、AIコーディングエージェントをローカルマシンの隔離された環境で実行できます。Claude Codeなどのエージェントを使用して開発を行う際、Sandboxesはシステムを危険にさらすことなく、エージェントに自律性を与える安全な方法を提供します。

## Docker Sandboxesを使用する理由

AIエージェントは、コマンドの実行、パッケージのインストール、コードのテストを行う必要があります。これらをホストマシンで直接実行すると、エージェントがファイル、プロセス、ネットワークへのフルアクセス権を持つことになります。Docker Sandboxesは、それぞれが独自のDockerデーモンを持つmicroVM内にエージェントを隔離します。これにより、エージェントはホストに影響を与えることなく、テスト用コンテナを起動したり環境を変更したりできます。

メリット：

- ホストシステムのリスクなしにエージェントに自律性を付与
- デフォルトで「YOLOモード」が可能（エージェントが許可を求めずに作業を続行）
- テストコンテナ実行用のプライベートDockerデーモン
- ホストとサンドボックス間のファイル共有
- ネットワークアクセスの制御

Docker Sandboxesと、コーディングエージェントを隔離する他の手法との比較については、[代替案との比較](./architecture.md#comparison-to-alternatives)を参照してください。

> [!NOTE]
>
> microVMベースのサンドボックスには、macOSまたはWindows（試験運用版）が必要です。Linuxユーザーは、[Docker Desktop 4.57](https://docs.docker.com/desktop/release-notes/#4570)以降で従来のコンテナベースのサンドボックスを使用できます。

## サンドボックスの使用方法

サンドボックスを作成して実行するには：

```console
$ docker sandbox run claude ~/my-project
```

このコマンドは、ワークスペース（`~/my-project`）用のサンドボックスを作成し、その中でClaude Codeエージェントを起動します。これにより、エージェントは隔離されたサンドボックス内で、コードの編集、ツールのインストール、コンテナの実行が可能になります。

## 仕組み

サンドボックスは、プライベートなDockerデーモンを備えた軽量なmicroVMで動作します。各サンドボックスは完全に隔離されており、エージェントはVM内で動作するため、ホストのDockerデーモンやコンテナ、ワークスペース外のファイルにはアクセスできません。

ワークスペースディレクトリは、ホストとサンドボックス間で同じ絶対パスで同期されるため、エラーメッセージ内のファイルパスは両方の環境で一致します。

サンドボックスはコンテナではなくVMであるため、ホスト上の`docker ps`には表示されません。確認するには`docker sandbox ls`を使用してください。

アーキテクチャ、隔離モデル、ネットワーキングに関する技術的な詳細は、[アーキテクチャ](/ai/sandboxes/architecture/)を参照してください。

### 複数のサンドボックス

プロジェクトごとに個別のサンドボックスを作成できます：

```shell
$ docker sandbox run claude ~/project-a
$ docker sandbox run claude ~/project-b
```

各サンドボックスは互いに完全に隔離されています。サンドボックスは削除するまで保持されるため、インストールされたパッケージや設定はそのワークスペースで引き続き利用可能です。

## サポートされているエージェント

Docker Sandboxesは、複数のAIコーディングエージェントに対応しています：

- **Claude Code** - Anthropicのコーディングエージェント

- **Codex** - OpenAIのCodexエージェント（一部サポート、開発中）

- **Copilot** - GitHub Copilotエージェント（一部サポート、開発中）

- **Gemini** - GoogleのGeminiエージェント（一部サポート、開発中）

- **cagent** - Dockerの[cagent](/ai/cagent/)（一部サポート、開発中）

- **Kiro** - AWS提供（一部サポート、開発中）

## はじめる

[クイックスタートガイド](/ai/sandboxes/get-started/)にアクセスして、最初のサンドボックス化されたエージェントを実行してみましょう。

## トラブルシューティング

一般的な設定エラーについては[トラブルシューティング](/ai/sandboxes/troubleshooting/)を参照するか、[Docker Desktopイシュートラッカー](https://github.com/docker/desktop-feedback))で問題を報告してください。
